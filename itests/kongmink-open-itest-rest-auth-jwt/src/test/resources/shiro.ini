# =======================
# Shiro INI configuration
# =======================
[main]
# Objects and their properties are defined here,
# Such as the securityManager, Realms and anything
# else needed to build the SecurityManager
keycloakRolesAuthGenerator = org.javaloong.kongmink.open.rest.auth.jwt.KeycloakRolesAuthorizationGenerator
keycloakRolesAuthGenerator.clientId = developer-account

signingConfig = org.pac4j.jwt.config.signature.RSASignatureConfiguration
signingConfig.keysFromJwk = {"kid":"DfIUInp1Ilq7B0x_0--v8167GrniGf4yU_tLJ_DmFxU","kty":"RSA","alg":"RS256","use":"sig","n":"401RQCVJngXCldTaptEX1jQDHX-4k2VG9GbeSDktK4Y99zla8nFOGXrzLCDweQoSp1rfmHcuNP34sUhjUqn6ESiB4V8kOsYTZd9JYeW27XSEvke-arwQECJp_Lp0gKfksulBJ0E3Ps5krrG7CS62DX_VYwmzI3gGLprEtmJep_Rucg1mkj2aPVRekDgI0QHudI4-ldJZKEsjW_O4rdcXiwfX9VxY4oaxtTVLjphzdZtI-JxaPau03GKTmZVEiutQFAo1e2lIBL0Fgr2rqhtW-knFRWL5Vj-Ef9UsrJCCiwUicHrAEOxHHkL511AqCNWr0yECOKlHQ4a5Gyh-dmpE0w","e":"AQAB","x5c":["MIICqTCCAZECBgGBlF0pFzANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1rb25nbWluay1vcGVuMB4XDTIyMDYyNDA2MTcyMloXDTMyMDYyNDA2MTkwMlowGDEWMBQGA1UEAwwNa29uZ21pbmstb3BlbjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAONNUUAlSZ4FwpXU2qbRF9Y0Ax1/uJNlRvRm3kg5LSuGPfc5WvJxThl68ywg8HkKEqda35h3LjT9+LFIY1Kp+hEogeFfJDrGE2XfSWHltu10hL5Hvmq8EBAiafy6dICn5LLpQSdBNz7OZK6xuwkutg1/1WMJsyN4Bi6axLZiXqf0bnINZpI9mj1UXpA4CNEB7nSOPpXSWShLI1vzuK3XF4sH1/VcWOKGsbU1S46Yc3WbSPicWj2rtNxik5mVRIrrUBQKNXtpSAS9BYK9q6obVvpJxUVi+VY/hH/VLKyQgosFInB6wBDsRx5C+ddQKgjVq9MhAjipR0OGuRsofnZqRNMCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAs33IHS3mXTw6xzXdJKKSwtJBk9NFZ9ciR4pzJqkwdSER0Izz5MPIHoV1uHBl0eFnkvg6z4GwUALit+t+C5dPegsc0wiJuKwRlJlVAcTG6ex8dghTaowG+Dz7S6oY5cy+SmB2V1kKppYBg4mcNrRx6w8Z8tn4NVp1KLLHSx2L/DdHklnZRebl13K0axF05kJR6yffi/1ak0DV0XYjyvYnuS9kz69Z62C2CFKNYyVD3Y2A/V7vVZXYsnIdzjqvvwjAy4YHuS3wL74My+F6jfPyz4Txv2CzR9Fo2XCzJvJPZx4P5cxa80ky/J18B3LEuzNczu5mzWj/B5htLXzatWO7MA=="],"x5t":"60xM4lQAgcyAqoauW1bNaEkq0yg","x5t#S256":"AG0PQ5wZPBzQDt69d7YsRz3KmG5IIOVlvtH2WWcpugY"}

jwtAuthenticator = org.javaloong.kongmink.open.rest.auth.jwt.JwtUserAuthenticator
jwtAuthenticator.signatureConfiguration = $signingConfig

directBearerAuthClient = org.pac4j.http.client.direct.DirectBearerAuthClient
directBearerAuthClient.authenticator = $jwtAuthenticator
directBearerAuthClient.authorizationGenerator = $keycloakRolesAuthGenerator

clients.clients = $directBearerAuthClient

############################################################################
# REALM & FILTERS:
############################################################################
jwtSecurityFilter = io.buji.pac4j.filter.SecurityFilter
jwtSecurityFilter.config = $config
jwtSecurityFilter.clients = DirectBearerAuthClient

[urls]
# The 'urls' section is used for url-based security
# in web applications.  We'll discuss this section in the
# Web documentation
/user/** = noSessionCreation,jwtSecurityFilter
/** = anon
